{% extends "base_email.html" %}

{% block content %}
<div style="background-color: #f8f9fa; padding: 20px;">
    <div style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        
        <!-- Header -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 8px 8px 0 0;">
            <h1 style="margin: 0; font-size: 28px; font-weight: 300;">{{ company_name }}</h1>
            <p style="margin: 10px 0 0 0; opacity: 0.9; font-size: 16px;">Factura de Venta</p>
        </div>
        
        <!-- Content -->
        <div style="padding: 40px 30px;">
            <p style="font-size: 16px; line-height: 1.6; color: #333; margin-bottom: 20px;">
                Estimado/a <strong>{{ customer_name }}</strong>,
            </p>
            
            <p style="font-size: 16px; line-height: 1.6; color: #333; margin-bottom: 20px;">
                Adjuntamos la factura <strong>{{ invoice_number }}</strong> con fecha {{ invoice_date }} por un valor de <strong>${{ total_amount }}</strong>.
            </p>
            
            {% if custom_message %}
            <div style="background-color: #f8f9fa; border-left: 4px solid #667eea; padding: 15px; margin: 20px 0; border-radius: 4px;">
                <p style="margin: 0; font-style: italic; color: #555;">
                    "{{ custom_message }}"
                </p>
            </div>
            {% endif %}
            
            <!-- Invoice Details -->
            <div style="background-color: #f8f9fa; padding: 20px; border-radius: 6px; margin: 25px 0;">
                <h3 style="margin: 0 0 15px 0; color: #333; font-size: 18px;">Detalles de la Factura</h3>
                <table style="width: 100%; border-collapse: collapse;">
                    <tr>
                        <td style="padding: 8px 0; color: #666; font-weight: bold;">N√∫mero:</td>
                        <td style="padding: 8px 0; text-align: right;">{{ invoice_number }}</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px 0; color: #666; font-weight: bold;">Fecha:</td>
                        <td style="padding: 8px 0; text-align: right;">{{ invoice_date }}</td>
                    </tr>
                    {% if due_date %}
                    <tr>
                        <td style="padding: 8px 0; color: #666; font-weight: bold;">Vence:</td>
                        <td style="padding: 8px 0; text-align: right;">{{ due_date }}</td>
                    </tr>
                    {% endif %}
                    <tr style="border-top: 1px solid #ddd;">
                        <td style="padding: 12px 0 8px 0; color: #333; font-weight: bold; font-size: 16px;">Total:</td>
                        <td style="padding: 12px 0 8px 0; text-align: right; font-weight: bold; font-size: 16px; color: #667eea;">${{ total_amount }}</td>
                    </tr>
                </table>
            </div>
            
            {% if balance_due > 0 %}
            <div style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 6px; margin: 20px 0;">
                <p style="margin: 0; color: #856404; font-weight: bold;">
                    üí≥ Saldo pendiente: ${{ balance_due }}
                </p>
            </div>
            {% endif %}
            
            <p style="font-size: 16px; line-height: 1.6; color: #333; margin: 25px 0 20px 0;">
                Si tiene alguna pregunta sobre esta factura, no dude en contactarnos.
            </p>
            
            <p style="font-size: 16px; line-height: 1.6; color: #333; margin-bottom: 30px;">
                Gracias por su preferencia.
            </p>
            
            <!-- CTA Button (if payment is pending) -->
            {% if balance_due > 0 and payment_url %}
            <div style="text-align: center; margin: 30px 0;">
                <a href="{{ payment_url }}" 
                   style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
                          color: white; 
                          padding: 12px 30px; 
                          text-decoration: none; 
                          border-radius: 25px; 
                          font-weight: bold; 
                          display: inline-block;
                          box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">
                    Ver Factura Online
                </a>
            </div>
            {% endif %}
        </div>
        
        <!-- Footer -->
        <div style="background-color: #f8f9fa; padding: 20px 30px; border-radius: 0 0 8px 8px; text-align: center; border-top: 1px solid #e9ecef;">
            <p style="margin: 0; color: #666; font-size: 14px;">
                Este email fue enviado desde {{ company_name }}
            </p>
            {% if company_phone or company_email %}
            <p style="margin: 10px 0 0 0; color: #666; font-size: 14px;">
                {% if company_phone %}üìû {{ company_phone }}{% endif %}
                {% if company_phone and company_email %} ‚Ä¢ {% endif %}
                {% if company_email %}‚úâÔ∏è {{ company_email }}{% endif %}
            </p>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}